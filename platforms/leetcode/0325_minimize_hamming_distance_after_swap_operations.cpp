#include "../../template.hpp"

using i32 = std::int32_t;
using i64 = std::int64_t;
//const i32 INF = 1000000000 + 7;
const i32 fastio_ = ([](){std::ios_base::sync_with_stdio(0); std::cin.tie(0);return 0;})();

i32 Find(vector<i32>& parent, i32 i) {
    if (parent[i] == -1) return i;
    return parent[i] = Find(parent, parent[i]);
}

void Union(vector<i32>& parent, i32 i, i32 j) {
    i = Find(parent, i);
    j = Find(parent, j);
    if (i == j) return;
    parent[i] = j;
}

i32 sol(vector<i32> nums, vector<i32> target, vector<vector<i32>> swaps) {
    i32 n = nums.size();
    vector<i32> parent(n, -1);
    for (const auto& swap : swaps) {
        Union(parent, swap[0], swap[1]);
    }
    unordered_map<i32, unordered_multiset<i32>> groups;
    for (i32 i = 0; i < n; ++i) {
        i32 root = Find(parent, i);
        groups[root].insert(nums[i]);
    }
    i32 ans = 0;
    for (i32 i = 0; i < n; ++i) {
        i32 root = Find(parent, i);
        if (groups[root].count(target[i])) {
            groups[root].erase(groups[root].find(target[i]));
        }
        else {
            ++ans;
        }
    }
    return ans;
}

int main() { TimeMeasure _;
    cout << sol({1,2,3,4}, {2,1,4,5}, {{0,1},{2,3}}) << endl; // 1
    cout << sol({1,2,3,4}, {1,3,2,4}, {}) << endl; // 2
    cout << sol({5,1,2,4,3}, {1,5,4,2,3}, {{0,4},{4,2},{1,3},{1,4}}) << endl; // 0
    cout << sol({2,2,1}, {1,2,2}, {{0,2},{1,2}}) << endl; // 0
    cout << sol({2,3,1}, {1,2,2}, {{0,2},{1,2}}) << endl; // 1
    cout << sol({2,2,1}, {1,2,3}, {{0,2},{1,2}}) << endl; // 1
    cout << sol({77,86,78,34,39,50,3,92,77,66,48,11,42,91,36,95,90,93,12,51,46,49,85,59,48,58,34,6,31,35,67,94,97,18,60,37,22,77,41,60,42,52,92,74,82,97,52,93,29,7,12,45,45,25,13,11,90,11,73,24,32,90,99,43,40,40,66,13,99,48,49,7,94,8,68,10,34,15,56,51,28,12,76,50,82,44,8,25,77,5,90}, {77,86,62,97,93,55,9,92,21,29,48,48,84,74,36,43,30,76,82,51,38,68,25,13,11,81,34,6,4,100,49,68,20,18,60,37,25,77,81,88,63,52,84,74,43,87,47,98,15,29,33,56,56,25,97,68,52,11,25,24,17,26,30,8,74,47,64,13,15,48,6,8,49,72,17,62,10,59,56,18,45,89,19,90,1,44,21,21,11,66,57}, {{24,90},{87,86},{20,86},{46,27},{75,55},{81,19},{17,1},{35,34},{74,47},{86,38},{55,54},{1,11},{67,0},{84,65},{45,75},{59,53},{64,17},{36,78},{22,11},{66,61},{87,42},{29,47},{20,18},{71,4},{68,36},{49,25},{62,46},{4,82},{51,77},{3,85},{34,64},{53,23},{48,53},{87,31},{17,80},{75,19},{46,35},{25,86},{23,13},{21,65},{51,10},{51,59},{84,49},{16,60},{42,20},{69,38},{32,61},{54,62},{34,48},{37,23},{14,63},{79,39},{56,74},{15,67},{26,22},{38,41},{74,79},{69,33},{11,52},{68,86},{46,43},{76,6},{57,11},{14,22},{46,21},{28,63},{51,9},{55,74},{65,39},{29,62},{53,34},{30,61},{24,17},{43,41},{47,71},{67,4},{82,18},{69,86},{71,21},{82,53},{31,20},{67,40},{77,88},{64,89},{2,43},{11,66},{44,27},{49,33},{48,60},{7,31},{69,82},{26,80},{88,16},{59,20},{63,51},{6,4},{80,74},{67,72},{36,31},{87,61},{39,8},{3,49},{58,89},{32,42},{48,81},{54,84},{42,16},{72,87},{5,9},{26,64},{57,83},{34,87},{23,78},{33,63},{47,86},{38,75},{34,43},{55,16},{63,81},{65,90},{29,78},{27,63},{32,72},{39,40},{34,22},{22,87},{43,28},{21,25},{46,89},{75,54},{84,57},{13,43},{57,90},{68,60},{29,24},{21,32},{6,0},{63,77},{54,4},{86,51},{79,66},{8,70},{56,64},{43,83},{85,88},{49,79},{46,60},{3,25},{21,54},{43,60},{55,23},{48,79},{59,8},{30,56},{2,9},{70,51},{14,89},{84,34},{44,0},{42,50},{42,65},{28,39},{37,6},{31,55},{12,21},{2,16},{79,44},{54,86},{17,32},{58,86},{59,36},{18,39},{58,46},{55,42},{43,39},{22,35},{67,39},{4,39},{1,22},{22,45},{76,39},{84,52},{63,40},{56,68},{15,58},{32,25},{31,33},{6,79}}) << endl; // 47
}
